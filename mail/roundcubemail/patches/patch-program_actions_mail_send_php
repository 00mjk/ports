$OpenBSD: patch-program_actions_mail_send_php,v 1.1 2021/10/29 14:00:00 sthen Exp $

From d73d81032f12bafa691b8f74c50b9bd7caf75606 Mon Sep 17 00:00:00 2001
From: Aleksander Machniak <alec@alec.pl>
Date: Thu, 21 Oct 2021 19:52:04 +0200
Subject: [PATCH] Fix some PHP8 warnings (#8239)

Index: program/actions/mail/send.php
--- program/actions/mail/send.php.orig
+++ program/actions/mail/send.php
@@ -400,13 +400,13 @@ class rcmail_action_mail_send extends rcmail_action
             }
             else {
                 $ctype   = str_replace('image/pjpeg', 'image/jpeg', $attachment['mimetype']); // #1484914
-                $file    = $attachment['data'] ?: $attachment['path'];
+                $file    = !empty($attachment['data']) ? $attachment['data'] : $attachment['path'];
                 $folding = (int) $rcmail->config->get('mime_param_folding');
 
                 $message->addAttachment($file,
                     $ctype,
                     $attachment['name'],
-                    $attachment['data'] ? false : true,
+                    !empty($attachment['data']) ? false : true,
                     $ctype == 'message/rfc822' ? '8bit' : 'base64',
                     'attachment',
                     isset($attachment['charset']) ? $attachment['charset'] : null,
