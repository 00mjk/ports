$OpenBSD: patch-index_c,v 1.3 2020/10/27 11:17:53 sthen Exp $

From 19eb4cbd6d6e4a593c4bd918bc7e25d53fa05a98 Mon Sep 17 00:00:00 2001
From: Austin Ray <austin@austinray.io>
Date: Sun, 27 Sep 2020 17:48:49 -0400
Subject: [PATCH] fix(entire-thread): query for current email

Index: index.c
--- index.c.orig
+++ index.c
@@ -2156,7 +2156,7 @@ int mutt_index_menu(struct MuttWindow *dlg)
         }
         oldcount = Context->mailbox->msg_count;
         struct Email *e_oldcur = mutt_get_virt_email(Context->mailbox, menu->current);
-        if (nm_read_entire_thread(Context->mailbox, cur.e) < 0)
+        if (nm_read_entire_thread(Context->mailbox, e_oldcur) < 0)
         {
           mutt_message(_("Failed to read thread, aborting"));
           break;
