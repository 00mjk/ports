$OpenBSD: patch-src_if-options_c,v 1.4 2020/11/21 14:33:31 sthen Exp $

From 0857eedfc89794cea5b0ff5d0bba0f60dee4183c Mon Sep 17 00:00:00 2001
From: Roy Marples <roy@marples.name>
Date: Sat, 21 Nov 2020 11:59:07 +0000
Subject: DHCP6: Delegated activations work once more

Index: src/if-options.c
--- src/if-options.c.orig
+++ src/if-options.c
@@ -2343,6 +2343,8 @@ default_config(struct dhcpcd_ctx *ctx)
 #endif
 
 	/* Inherit some global defaults */
+	if (ctx->options & DHCPCD_CONFIGURE)
+		ifo->options |= DHCPCD_CONFIGURE;
 	if (ctx->options & DHCPCD_PERSISTENT)
 		ifo->options |= DHCPCD_PERSISTENT;
 	if (ctx->options & DHCPCD_SLAACPRIVATE)
@@ -2371,8 +2373,8 @@ read_config(struct dhcpcd_ctx *ctx,
 	if ((ifo = default_config(ctx)) == NULL)
 		return NULL;
 	if (default_options == 0) {
-		default_options |= DHCPCD_DAEMONISE |
-			DHCPCD_CONFIGURE | DHCPCD_GATEWAY;
+		default_options |= DHCPCD_CONFIGURE | DHCPCD_DAEMONISE |
+		    DHCPCD_GATEWAY;
 #ifdef INET
 		skip = socket(PF_INET, SOCK_DGRAM, 0);
 		if (skip != -1) {
