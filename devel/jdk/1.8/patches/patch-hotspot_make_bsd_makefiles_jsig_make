$OpenBSD: patch-hotspot_make_bsd_makefiles_jsig_make,v 1.1 2021/08/05 15:40:20 kurt Exp $

Fix configure arg -with-native-debug-symbols=internal

Index: hotspot/make/bsd/makefiles/jsig.make
--- hotspot/make/bsd/makefiles/jsig.make.orig
+++ hotspot/make/bsd/makefiles/jsig.make
@@ -81,8 +81,10 @@ ifeq ($(ENABLE_FULL_DEBUG_SYMBOLS),1)
 	$(RM) -r $(LIBJSIG_DEBUGINFO)
     endif
   else
+    ifneq ($(STRIP_POLICY),no_strip)
 	$(QUIETLY) $(OBJCOPY) --only-keep-debug $@ $(LIBJSIG_DEBUGINFO)
 	$(QUIETLY) $(OBJCOPY) --add-gnu-debuglink=$(LIBJSIG_DEBUGINFO) $@
+    endif
     ifeq ($(STRIP_POLICY),all_strip)
 	$(QUIETLY) $(STRIP) $@
     else
@@ -91,9 +93,11 @@ ifeq ($(ENABLE_FULL_DEBUG_SYMBOLS),1)
       # implied else here is no stripping at all
       endif
     endif
-    ifeq ($(ZIP_DEBUGINFO_FILES),1)
+    ifneq ($(STRIP_POLICY),no_strip)
+      ifeq ($(ZIP_DEBUGINFO_FILES),1)
 	$(ZIPEXE) -q -y $(LIBJSIG_DIZ) $(LIBJSIG_DEBUGINFO)
 	$(RM) $(LIBJSIG_DEBUGINFO)
+      endif
     endif
   endif
 endif
