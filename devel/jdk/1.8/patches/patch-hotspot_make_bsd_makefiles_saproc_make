$OpenBSD: patch-hotspot_make_bsd_makefiles_saproc_make,v 1.1 2021/08/05 15:40:20 kurt Exp $

Fix configure arg -with-native-debug-symbols=internal 

Index: hotspot/make/bsd/makefiles/saproc.make
--- hotspot/make/bsd/makefiles/saproc.make.orig
+++ hotspot/make/bsd/makefiles/saproc.make
@@ -152,8 +152,10 @@ ifeq ($(ENABLE_FULL_DEBUG_SYMBOLS),1)
 	$(RM) -r $(LIBSAPROC_DEBUGINFO)
     endif
   else
+    ifneq ($(STRIP_POLICY),no_strip)
 	$(QUIETLY) $(OBJCOPY) --only-keep-debug $@ $(LIBSAPROC_DEBUGINFO)
 	$(QUIETLY) $(OBJCOPY) --add-gnu-debuglink=$(LIBSAPROC_DEBUGINFO) $@
+    endif
     ifeq ($(STRIP_POLICY),all_strip)
 	$(QUIETLY) $(STRIP) $@
     else
@@ -162,9 +164,11 @@ ifeq ($(ENABLE_FULL_DEBUG_SYMBOLS),1)
       # implied else here is no stripping at all
       endif
     endif
-    ifeq ($(ZIP_DEBUGINFO_FILES),1)
+    ifneq ($(STRIP_POLICY),no_strip)
+      ifeq ($(ZIP_DEBUGINFO_FILES),1)
 	$(ZIPEXE) -q -y $(LIBSAPROC_DIZ) $(LIBSAPROC_DEBUGINFO)
 	$(RM) $(LIBSAPROC_DEBUGINFO)
+      endif
     endif
   endif
 endif
