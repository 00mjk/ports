$OpenBSD: patch-src_hb-machinery_hh,v 1.1 2022/02/13 07:50:45 ajacoutot Exp $

From 68937238791181b6172ea4cd3d127ff4f6bbdd98 Mon Sep 17 00:00:00 2001
From: Behdad Esfahbod <behdad@behdad.org>
Date: Fri, 11 Feb 2022 13:16:25 -0600
Subject: [PATCH] [machinery] Allow using lazy-loader with void*

Index: src/hb-machinery.hh
--- src/hb-machinery.hh.orig
+++ src/hb-machinery.hh
@@ -194,7 +194,8 @@ struct hb_lazy_loader_t : hb_data_wrapper_t<Data, Wher
   }
 
   const Returned * operator -> () const { return get (); }
-  const Returned & operator * () const  { return *get (); }
+  template <typename U = Returned, hb_enable_if (!hb_is_same (U, void))>
+  const U & operator * () const  { return *get (); }
   explicit operator bool () const
   { return get_stored () != Funcs::get_null (); }
   template <typename C> operator const C * () const { return get (); }
