REVERT: https://github.com/WebKit/WebKit/commit/28d9d62aa2662266c2d9cb0032b036a257c6c8ab
This prevents a crash at exit time for any application using WebkitGTK.
From 28d9d62aa2662266c2d9cb0032b036a257c6c8ab Mon Sep 17 00:00:00 2001
From: Pablo Saavedra <psaavedra@igalia.com>
Date: Wed, 23 Feb 2022 09:32:13 +0000
Subject: [PATCH] [GTK][WPE] PlatformDisplay::terminateEglDisplays() is never called https://bugs.webkit.org/show_bug.cgi?id=217655

Index: Source/WebKit/Shared/AuxiliaryProcess.cpp
--- Source/WebKit/Shared/AuxiliaryProcess.cpp.orig
+++ Source/WebKit/Shared/AuxiliaryProcess.cpp
@@ -60,13 +60,7 @@ AuxiliaryProcess::~AuxiliaryProcess()
 
 void AuxiliaryProcess::didClose(IPC::Connection&)
 {
-// Stop the run loop for GTK and WPE to ensure a normal exit, since we need
-// atexit handlers to be called to cleanup resources like EGL displays.
-#if PLATFORM(GTK) || PLATFORM(WPE)
-    stopRunLoop();
-#else
     _exit(EXIT_SUCCESS);
-#endif
 }
 
 void AuxiliaryProcess::initialize(const AuxiliaryProcessInitializationParameters& parameters)
