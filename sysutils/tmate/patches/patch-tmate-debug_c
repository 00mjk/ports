$OpenBSD: patch-tmate-debug_c,v 1.4 2020/03/28 17:23:44 kn Exp $

Actually disable all debug handling when not requested.
Fixes undefined references to backtrace{,_symbols}().

Index: tmate-debug.c
--- tmate-debug.c.orig
+++ tmate-debug.c
@@ -65,6 +65,7 @@ static int print_resolved_stack_frame(const char *fram
 
 void tmate_print_stack_trace(void)
 {
+#if DEBUG
 	void *array[20];
 	size_t size;
 	char **strings;
@@ -76,13 +77,12 @@ void tmate_print_stack_trace(void)
 	tmate_info ("============ %zd stack frames ============", size);
 
 	for (i = 1; i < size; i++) {
-#if DEBUG
 		if (print_resolved_stack_frame(strings[i]) < 0)
-#endif
 			tmate_info("%s", strings[i]);
 	}
 
 	free (strings);
+#endif
 }
 
 static void handle_crash(int sig)
