$OpenBSD: patch-data_meson_build,v 1.2 2021/10/30 13:53:16 ajacoutot Exp $

Fix build with meson >= 0.60.0
https://gitlab.freedesktop.org/xdg/shared-mime-info/-/issues/170

Index: data/meson.build
--- data/meson.build.orig
+++ data/meson.build
@@ -1,20 +1,13 @@
 
 install_man('update-mime-database.1')
 
-freedesktop_org_xml = custom_target('freedesktop.org.xml',
-    input : files(
-        'freedesktop.org.xml.in',
-        'its/shared-mime-info.its',
-        'its/shared-mime-info.loc',
-    ),
-    output: 'freedesktop.org.xml',
-    command: [
-        find_program('freedesktop_generate.sh'),
-        meson.source_root(),
-        meson.build_root()
-    ],
-    install: true,
-    install_dir: get_option('datadir') / 'mime' / 'packages',
+freedesktop_org_xml = i18n.merge_file(
+  input : 'freedesktop.org.xml.in',
+  output: 'freedesktop.org.xml',
+  po_dir: join_paths(meson.source_root(), 'po'),
+  data_dirs: join_paths(meson.source_root(), 'data'),
+  install: true,
+  install_dir: get_option('datadir') / 'mime' / 'packages',
 )
 
 install_data(
